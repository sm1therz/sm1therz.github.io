"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[68404],{20276:(e,t,n)=>{n.d(t,{O:()=>r});var a=n(62942);let r=()=>{var e,t;let n=null!=(e=(0,a.useSearchParams)())?e:new URLSearchParams,r=null!=(t=(0,a.useParams)())?t:{},o=new URLSearchParams(n.toString());return Object.getOwnPropertyNames(r).forEach(e=>{o.delete(e);let t=r[e],n="string"==typeof t?t.split("/"):t;null==n||n.forEach(t=>{o.append(e,t)})}),new a.ReadonlyURLSearchParams(o)}},68404:(e,t,n)=>{n.d(t,{IR:()=>V,Pn:()=>I,Ah:()=>C,lz:()=>v,cm:()=>S,Dr:()=>T,V4:()=>E,I6:()=>L,hA:()=>R});var a,r=n(7620);function o(e){return setTimeout(e,50)}function i(){return"slotsDone"===window._embedBookerState}function l(e){let{embedStore:t}=e;return!!t.parentInformedAboutContentHeight&&(!(window._embedBookerState&&new URL(document.URL).searchParams.get("cal.embed.pageType"))||i())}let s=async e=>{let t=new URL(document.URL),n=null,a=t.searchParams.get("cal.queuedFormResponseId");if(!a)return null;if("00000000-0000-0000-0000-000000000000"===a)return 0;let{form:r,...o}=e,i=await fetch("/api/routing-forms/queued-response",{method:"POST",body:JSON.stringify({queuedFormResponseId:a,params:o})});if(!i.ok)return null;let l=(await i.json()).data.formResponseId;return l&&(n=l),n};var d=function(e){return e[e.NOT_INITIALIZED=0]="NOT_INITIALIZED",e[e.INITIALIZED=1]="INITIALIZED",e}({});let c={connectVersion:0,renderState:null,router:{ensureQueryParamsInUrl(e){let{toBeThereParams:t,toRemoveParams:n}=e,a=!1,{hasChanged:r}=function e(){if(a)return{hasChanged:!1};let r=new URL(document.URL),i=!1;for(let[e,n]of Object.entries(t))(i=!function(e){let{param:t,value:n,container:a}=e,r=function(e){let t={};if(null===e)return t;for(let[n,a]of e)if(t.hasOwnProperty(n)){let e=t[n];Array.isArray(e)||(e=[e]),e.push(a),t[n]=e}else t[n]=a;return t}(a.entries());if(!a.has(t))return!1;let o=r[t],i=Array.isArray(n)?n:[n];return i.length===o.length&&i.every(e=>o.includes(e))}({param:e,value:n,container:r.searchParams}))&&function(e){let{key:t,value:n,url:a}=e;a.searchParams.delete(t),(Array.isArray(n)?n:[n]).forEach(e=>{a.searchParams.append(t,e)})}({key:e,value:n,url:r});return function(e){let{keys:t,url:n}=e;for(let e of t)n.searchParams.delete(e)}({keys:n,url:r}),(i=i||n.length>0)&&window.history.replaceState({},"",r.toString()),o(e),{hasChanged:i}}();return{stopEnsuringQueryParamsInUrl:()=>{a=!0},hasChanged:r}}},state:0,styles:{},nonStyles:{},namespace:null,embedType:void 0,reactStylesStateSetters:{},reactNonStylesStateSetters:{},parentInformedAboutContentHeight:!1,windowLoadEventFired:!1,setTheme:void 0,theme:void 0,uiConfig:void 0,setUiConfig:[]};var u=n(73811),m=n(20276);let f=["__iframeReady","__dimensionChanged","__connectInitiated"],h=!1;{window.CalEmbed=(null==(a=window)?void 0:a.CalEmbed)||{},window.CalEmbed.embedStore=c;let e=navigator.userAgent.toLowerCase();e.includes("safari")&&!e.includes("chrome")&&g("Safari Detected: Using setTimeout instead of rAF")}function g(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];{let e=P(),n=new URL(document.URL).searchParams,a=window.CalEmbed.__logQueue=window.CalEmbed.__logQueue||[];t.push({ns:e,url:document.URL}),t.unshift("CAL:"),a.push(t),n.get("debug")&&console.log("Child:",...t)}}let p=e=>{for(let[,t]of(c.styles=e,Object.entries(c.reactStylesStateSetters)))t(t=>({...t,...e}))},w=e=>{for(let[,t]of(c.nonStyles=e,Object.entries(c.reactStylesStateSetters)))t(t=>({...t,...e}))},b=e=>e.styles?(c.reactStylesStateSetters[e.elementName]=e.setState,e.setState(c.styles||{}),()=>{delete c.reactStylesStateSetters[e.elementName]}):(c.reactNonStylesStateSetters[e.elementName]=e.setState,e.setState(c.nonStyles||{}),()=>{delete c.reactNonStylesStateSetters[e.elementName]}),y=e=>{var t,n;let a=new URL(document.URL),o=null!=(t=null==a?void 0:a.pathname)?t:"",i=null!=(n=null==a?void 0:a.searchParams)?n:null,l=(0,r.useRef)("".concat(o,"?").concat(i));(0,r.useEffect)(()=>{let t="".concat(o,"?").concat(i);l.current!==t&&(l.current=t,e(t))},[o,i,e])},S=()=>{let e=(0,m.O)(),[t,n]=(0,r.useState)(c.theme||(null==e?void 0:e.get("theme")));return y((0,r.useCallback)(()=>{null===u.i||void 0===u.i||u.i.fire("__routeChanged",{})},[])),c.setTheme=n,t},E=()=>{let[e,t]=(0,r.useState)(c.uiConfig||{});return c.setUiConfig.push(t),(0,r.useEffect)(()=>()=>{let e=c.setUiConfig.findIndex(e=>e===t);c.setUiConfig.splice(e,1)}),e},v=e=>{let[,t]=(0,r.useState)({});return(0,r.useEffect)(()=>b({elementName:e,setState:t,styles:!0}),[]),(c.styles||{})[e]||{}},C=e=>{let[,t]=(0,r.useState)({});return(0,r.useEffect)(()=>b({elementName:e,setState:t,styles:!1}),[]),(c.nonStyles||{})[e]||{}},L=()=>{let e=!1;return"transparent"===v("body").background&&(e=!0),e},I=()=>C("branding")||{};function P(){var e,t,n,a;if(null!=c.namespace)return c.namespace;{let e=null!=(a=null==(n=window)||null==(t=n.getEmbedNamespace)?void 0:t.call(n))?a:null;return c.namespace=e,e}}let R=e=>{let[t,n]=(0,r.useState)(e);return(0,r.useEffect)(()=>{var e,t,a;let r=null!=P();parent===window||r||g("Looks like you have iframed cal.com but not using Embed Snippet. Directly using an iframe isn't recommended."),n((null==(t=window)||null==(e=t.isEmbed)?void 0:e.call(t))||!1)},[]),t},T=()=>{let[e,t]=(0,r.useState)(null);return(0,r.useEffect)(()=>{t(c.embedType?c.embedType:c.embedType=new URL(document.URL).searchParams.get("embedType"))},[]),e};function U(){"visible"!==document.body.style.visibility&&(document.body.style.visibility="visible"),o(()=>{U()})}async function A(e){let{newlyRecordedResponseId:t,toBeThereParams:n,toRemoveParams:a}=e,{stopEnsuringQueryParamsInUrl:r}=c.router.ensureQueryParamsInUrl({toBeThereParams:{...n,"cal.routingFormResponseId":t.toString()},toRemoveParams:a});r()}async function N(){return new Promise(e=>{!function t(){if("completed"!==c.renderState)return void o(t);e()}()})}let _={ui:function(e){var t,n;g("Method: ui called",e);let a=e.styles;a&&console.warn("Cal.com Embed: `styles` prop is deprecated. Use `cssVarsPerTheme` instead to achieve the same effect. Here is a list of CSS variables that are supported. https://github.com/calcom/cal.com/blob/main/packages/config/tailwind-preset.js#L19"),(null==a||null==(t=a.body)?void 0:t.background)&&(document.body.style.background=a.body.background),e.theme&&(c.theme=e.theme,c.setTheme&&c.setTheme(e.theme)),(e={...c.uiConfig,...e}).cssVarsPerTheme&&window.CalEmbed.applyCssVars(e.cssVarsPerTheme),e.colorScheme&&F(e.colorScheme),c.setUiConfig&&(c.uiConfig=n=e,c.setUiConfig.forEach(e=>e(n))),p(a||{}),w(a||{})},parentKnowsIframeReady:e=>{g("Method: `parentKnowsIframeReady` called"),o(function e(){if(!l({embedStore:c}))return void o(e);U(),g("renderState is 'completed'"),c.renderState="completed",null===u.i||void 0===u.i||u.i.fire("linkReady",{})})},connect:async function(e){let{config:t,params:n}=e;null===u.i||void 0===u.i||u.i.fire("__connectInitiated",{}),g("Method: connect, requested with params",{config:t,params:n});let{iframeAttrs:a,"cal.embed.noSlotsFetchOnConnect":r,...o}=t;c.parentInformedAboutContentHeight=!1,"true"!==r&&(g("Method: connect, noSlotsFetchOnConnect is false. Requesting slots re-fetch"),c.connectVersion=c.connectVersion+1);let i=c.connectVersion,l={...n,...o,"cal.embed.connectVersion":i.toString()},d=["preload","prerender","cal.skipSlotsFetch"];await N(),g("Method: connect, renderState is completed. Connecting"),await O({toBeThereParams:l,toRemoveParams:d});let m=await s(n);"number"==typeof m&&await A({newlyRecordedResponseId:m,toBeThereParams:l,toRemoveParams:d})}},k=e=>{parent.postMessage({originator:"CAL",...e},"*")};function F(e){e&&(document.documentElement.style.colorScheme=e)}async function O(e){let{toBeThereParams:t,toRemoveParams:n}=e,{hasChanged:a,stopEnsuringQueryParamsInUrl:r}=c.router.ensureQueryParamsInUrl({toBeThereParams:t,toRemoveParams:n}),s=0;return i()&&a&&(s=2),await new Promise(e=>{o(function t(){if(!l({embedStore:c})||s>0){s--,o(t);return}r(),null===u.i||void 0===u.i||u.i.fire("__connectCompleted",{}),null===u.i||void 0===u.i||u.i.fire("linkReady",{}),e()})}),{stopEnsuringQueryParamsInUrl:r}}let D=()=>"true"===new URL(document.URL).searchParams.get("prerender");function V(e){let{bookerState:t,slotsQuery:n}=e;window._embedBookerState=function(e){let{bookerState:t,slotsQuery:n}=e;return"loading"===t?"initializing":n.isLoading?"slotsLoading":n.isPending||n.isSuccess?"slotsDone":n.isError?"slotsLoadingError":"slotsPending"}({bookerState:t,slotsQuery:n})}!function(){var e,t,n,a,r,i;g("Embed SDK loaded",{isEmbed:(null==(t=window)||null==(e=t.isEmbed)?void 0:e.call(t))||!1});let l=new URL(document.URL);if(c.theme=null==(a=window)||null==(n=a.getEmbedTheme)?void 0:n.call(a),c.uiConfig={colorScheme:l.searchParams.get("ui.color-scheme"),layout:l.searchParams.get("layout")},F(c.uiConfig.colorScheme),top===window){U(),"transparent"===document.body.style.background&&(document.body.style.background=""),g("Embed SDK Skipped as we are in top");return}let s="true"!==l.searchParams.get("cal.skipSlotsFetch");g("Slots will ".concat(s?"":"NOT ","be fetched")),window.addEventListener("message",e=>{let t=e.data;if(!t)return;let n=t.method;if("CAL"===t.originator&&"string"==typeof n){var a;null==(a=_[n])||a.call(_,t.arg)}}),document.addEventListener("click",e=>{if(!e.target||!(e.target instanceof Node))return;let t=document.getElementsByClassName("main")[0]||document.getElementsByTagName("main")[0]||document.documentElement;e.target.contains(t)&&(null===u.i||void 0===u.i||u.i.fire("__closeIframe",{}))}),null===u.i||void 0===u.i||u.i.on("*",e=>{if(D()&&!f.includes(e.detail.type))return;let t=e.detail;g(t),k(t)}),"true"!==l.searchParams.get("preload")&&(null==(i=window)||null==(r=i.isEmbed)?void 0:r.call(i))?function(){if(null===u.i||void 0===u.i||u.i.fire("__iframeReady",{isPrerendering:D()}),c.renderState="inProgress",c.state!==d.NOT_INITIALIZED)return g("Embed Iframe already initialized");c.state=d.INITIALIZED,g("Initializing embed-iframe");let e=window.CalComPageStatus;if(e&&"200"!=e)null===u.i||void 0===u.i||u.i.fire("linkFailed",{code:e,msg:"Problem loading the link",data:{url:document.URL}});else{let e,t,n,a;e=null,t=null,n=!0,a=!1,o(function r(){if("complete"!==document.readyState)return void o(r);if(!a)return void setTimeout(()=>{a=!0,r()},100);c.windowLoadEventFired||null===u.i||void 0===u.i||u.i.fire("__windowLoadComplete",{}),c.windowLoadEventFired=!0;let i=document.getElementsByClassName("main")[0]||document.getElementsByTagName("main")[0]||document.documentElement,l=document.documentElement.scrollHeight,s=document.documentElement.scrollWidth;if(!(i instanceof HTMLElement))throw Error("Main element should be an HTMLElement");let d=getComputedStyle(i),m=Math.ceil(parseFloat(d.height)+parseFloat(d.marginTop)+parseFloat(d.marginBottom)),f=Math.ceil(parseFloat(d.width)+parseFloat(d.marginLeft)+parseFloat(d.marginRight)),h=n?l:m,g=n?s:f;if(!h||!g)return void o(r);e===h&&t===g&&c.parentInformedAboutContentHeight||(c.parentInformedAboutContentHeight=!0,e=h,t=g,null===u.i||void 0===u.i||u.i.fire("__dimensionChanged",{iframeHeight:h,iframeWidth:g,isFirstTime:n})),n=!1,o(r)})}}():g("Preloaded scenario - Skipping initialization and setup as only assets need to be loaded")}()},73811:(e,t,n)=>{function a(e,t){let n=new window.CustomEvent(e,{detail:t});window.dispatchEvent(n)}n.d(t,{i:()=>o});class r{static parseAction(e){if(!e)return null;let[t,n,a]=e.split(":");return"CAL"!==t?null:{ns:n,type:a}}getFullActionName(e){return this.namespace?"CAL:".concat(this.namespace,":").concat(e):"CAL::".concat(e)}fire(e,t){let n=this.getFullActionName(e),r={type:e,namespace:this.namespace,fullType:n,data:t};a(n,r),a(this.getFullActionName("*"),r)}on(e,t){let n=this.getFullActionName(e);window.addEventListener(n,t)}off(e,t){let n=this.getFullActionName(e);window.removeEventListener(n,t)}constructor(e){e=e||"",this.namespace=e}}let o=null;!function(){if(window.isEmbed)return;let e=new URL(document.URL),t=e.searchParams.get("embed"),n=e.pathname.endsWith("/embed"),a="string"==typeof t?t:window.name.includes("cal-embed=")?window.name.replace(/cal-embed=(.*)/,"$1").trim():n?"":null;window.isEmbed=()=>"string"==typeof a,window.getEmbedTheme=()=>window.CalEmbed.embedStore.theme?window.CalEmbed.embedStore.theme:new URL(document.URL).searchParams.get("theme"),window.getEmbedNamespace=()=>a,window.CalEmbed=window.CalEmbed||{},window.CalEmbed.applyCssVars=e=>{let t=[];if(e)for(let[n,a]of Object.entries(e)){for(let[e,r]of(t.push(".".concat(n," {")),Object.entries(a)))t.push("--".concat(e,": ").concat(r," !important;"));t.push("}")}let n=document.head.querySelector("#embed-css-vars");if(n){console.warn("Existing embed CSS Vars are being reset"),n.innerText=t.join("\n");return}let a=document.createElement("style");a.id="embed-css-vars",a.innerText=t.join("\n"),document.head.appendChild(a)}}(),o=new r(window.getEmbedNamespace())}}]);
//# sourceMappingURL=68404-9ba6fbc42a0074ee.js.map